.ui.page.centered.grid
  .twelve.wide.column
    %h2.ui.basic.center.aligned.segment
      Cadastro
      %i.ui.write.icon
    %a{ href: 'login' }
      Já tem uma conta? Entrar!
    - if notice
      .ui.negative.small.message
        .content
          %p= notice
    = render partial: 'messages/error_list',
      locals: { errors: @user.errors.full_messages }

    .ui.form
      = form_for @user, url: register_url, method: :post, multipart: true do |f|

        / Informações da Conta
        .ui.segments
          .ui.blue.segment
            .ui.centered.header Informações da Conta
          .ui.segment
            .field{ class: error_class(@user, :email) }
              .ui.left.icon.input
                = f.email_field :email, placeholder: 'Email'
                %i.mail.icon

            .field{ class: error_class(@user, :password) }
              .ui.left.icon.input
                = f.password_field :password, placeholder: 'Senha'
                %i.key.icon

            .field{ class: error_class(@user, :password_confirmation) }
              .ui.left.icon.input
                = f.password_field :password_confirmation,
                  placeholder: 'Confirmação de senha'
                %i.key.icon

        / Informações Pessoais
        = fields_for :person, @user.person do |person|
          .ui.segments
            .ui.green.segment
              .ui.centered.header Informações Pessoais
            .ui.segment
              .ui.grid
                .five.wide.column
                  .ui.card
                    .image#preview_image
                      = image_tag 'example/avatars/default.jpg'
                    .ui.bottom.attached.basic.button#avatar_button
                      %i.photo.icon
                      Escolher Foto
                      .hidden
                        = file_field :person, :avatar
                .eleven.wide.column
                  .field{ class: error_class(@user, :name) }
                    .ui.left.icon.input
                      = person.text_field :name, placeholder: 'Nome'
                      %i.user.icon

                  .field{ class: error_class(@user, :last_name) }
                    .ui.left.icon.input
                      = text_field :person, 'last_name',
                        placeholder: 'Sobrenome'
                      %i.user.icon

                  .field{ class: error_class(@user, :nickname) }
                    .ui.left.icon.input
                      = text_field :person, 'nickname',
                        placeholder: 'Nome preferido?'
                      %i.star.icon

                  .field{ class: error_class(@user, :birthday) }
                    .ui.left.icon.input
                      = date_field :person, 'birthday',
                        placeholder: 'Seu aniversário', class: 'datemask'
                      %i.calendar.icon

                  .field{ class: error_class(@user, :phones) }
                    .ui.left.icon.input
                      = text_field :person, 'phone',
                      placeholder: 'Telefone de contato com DDD',
                      class: 'phone'
                      %i.call.icon
                  .ui.grid
                    .column
                      .two.fields
                        .field{ class: error_class(@user, :ward) }
                          = collection_select(:person, :ward_id,
                            @wards, :id, :name,
                            { include_blank: 'Selecione sua Ala' },
                            class: 'ui search dropdown')
                        .field{ class: error_class(@user, :gender) }
                          = select :person, :gender,
                            Person::GENDER,
                            { include_blank: 'Selecione seu Sexo' },
                            class: 'ui dropdown'
                  .ineline.field{ class: error_class(@user, :agreed) }
                    .ui.checkbox
                      = check_box(:person, :agreed)
                      %label
                        Concordo que meus dados estarão seguros e poderão ser
                        utilizados na aplicação

        / Informações do Contato de Emergência
        .ui.segments
          .ui.red.segment
            .ui.centered.header Contato de Emergência
          .ui.segment
            .field
              .ui.left.icon.input
                = text_field :emergency_contact, 'name',
                  placeholder: 'Nome completo'
                %i.user.icon
            .field
              .ui.left.icon.input
                = text_field :emergency_contact, 'phone',
                placeholder: 'Telefone de contato com DDD',
                class: 'phone'
                %i.call.icon
            .field
              = select :emergency_contact, :kinship,
                [['Pai', '1'], ['Mãe','2']],
                { include_blank: 'Grau de parentesco' },
                class: 'ui dropdown'

        .ui.green.segment
          %button.ui.right.floated.green.button{ type: 'submit' }
            Cadastrar
            %i.sign.in.icon
          %a{ href: 'login' }
            Já tem uma conta? Entrar!
